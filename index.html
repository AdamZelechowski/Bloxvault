<!-- Firebase SDKs (example only if not already included in app.js) -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-app.js";
  import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBDuLLrHkMp8J3iyb183lDzSrNNIPallcQ",
    authDomain: "bloxvault-d1ff0.firebaseapp.com",
    projectId: "bloxvault-d1ff0",
    storageBucket: "bloxvault-d1ff0.appspot.com",
    messagingSenderId: "365008891027",
    appId: "1:365008891027:web:3578577b3c33714f207166",
    measurementId: "G-M3D3KVD5H5"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // Show correct UI based on login
  onAuthStateChanged(auth, (user) => {
    if (user) {
      document.getElementById("auth").style.display = "none";
      document.getElementById("navButtons").style.display = "flex";
      document.getElementById("dashboard").style.display = "block";
      document.getElementById("userEmail").textContent = user.email;
    } else {
      document.getElementById("auth").style.display = "block";
      document.getElementById("dashboard").style.display = "none";
      document.getElementById("rewards").style.display = "none";
      document.getElementById("navButtons").style.display = "none";
    }
  });

  window.login = () => {
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;
    signInWithEmailAndPassword(auth, email, password)
      .catch((error) => alert(error.message));
  };

  window.register = () => {
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;
    createUserWithEmailAndPassword(auth, email, password)
      .catch((error) => alert(error.message));
  };

  window.logout = () => {
    signOut(auth);
  };

  window.showDashboard = () => {
    document.getElementById("dashboard").style.display = "block";
    document.getElementById("rewards").style.display = "none";
  };

  window.showRewards = () => {
    document.getElementById("dashboard").style.display = "none";
    document.getElementById("rewards").style.display = "block";
  };

  window.requestReward = () => {
    const type = document.getElementById("rewardType").value;
    const details = document.getElementById("rewardDetails").value;
    alert(`Requested ${type} reward for: ${details}`);
  };
</script>
